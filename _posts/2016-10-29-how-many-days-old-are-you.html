---
layout: post
title: Сколько вам дней?

post_on_sidebar: true

tag:
  - праздник

category:
  - tools

summary: Узнайте, сколько вам дней, и когда у вас будет ближайшая «тысяча». Вы сможете добавить праздник в Google Календарь.
---

 <div class="container-form">
  <form id="timer_form_id" name="timerform">

    <fieldset>
       Дата рождения: <input type="date"   name="date1">
    </fieldset>
    <fieldset>
       Сегодня: <input type="date"   name="date2">
    </fieldset>

    <fieldset>
      <input type="button" name="B1" value="Посчитать" onclick="cal()">
    </fieldset>

    <fieldset name="answerfieldset" hidden="true">
      <span id="answer"></span>
    </fieldset>

    <fieldset name="addtocalendarfieldset" hidden="true">
      <input type="button" name="addtocalendar" value="Добавить в Google Календарь" onclick="window.open('')">
    </fieldset>

  </form>
</div>

<script>

    window.onload = function() {
        var date = new Date();

        var day = date.getDate();
        var month = date.getMonth() + 1;
        var year = date.getFullYear();
        if (month < 10) month = "0" + month;
        if (day < 10) day = "0" + day;
        var today = year + "-" + month + "-" + day;

        document.timerform.date2.value = today;
    }

    function cal() {
        var date1 = new Date(document.timerform.date1.value);
        var date2 = new Date(document.timerform.date2.value);

        var t1 = date1.getTime();
        var t2 = date2.getTime();

        document.timerform.answerfieldset.hidden = false;

        if (t1 !== t1) {
            document.getElementById('answer').innerHTML = "<font color='red'>Введите дату рождения</font>";
        } else {
          var ms = t2 - t1;
          if (ms < 0)
            document.getElementById('answer').innerHTML = "Вы ещё не родились. Будьте аккуратны.";
          else if (ms == 0)
            document.getElementById('answer').innerHTML = "Вы родились сегодня. Будьте аккуратны.";
          else {

            var days = Math.round(ms / 86400000);

            var daysplural;
            var remainder = Math.floor(days % 100 / 10);
            if (remainder == 1) daysplural = "дней";
            else {
                remainder = days % 10;
                if (remainder == 1) daysplural = "день";
                else if (0 < remainder && remainder < 5  ) daysplural = "дня";
                else daysplural = "дней";
            }


              var daysLeftTo1000 = 1000 - days % 1000 ;
              var count1000 = Math.floor(days / 1000) ;
              var date1000 = new Date(date2.getTime());
              date1000.setDate(date1000.getDate() + daysLeftTo1000);

              if (daysLeftTo1000 == 1000)
              {
                var daysLeftTo10000 = 10000 - days % 10000 ;
                var count10000 = Math.floor(days / 10000) ;
                var date10000 = new Date(date2.getTime());
                date10000.setDate(date10000.getDate() + daysLeftTo10000);

                document.getElementById('answer').innerHTML = "Вам сегодня ровно " + days + " " + daysplural + "!<br>"
                + date10000.toLocaleDateString() +  "г. вам исполнится " +(count10000 +1)+ "0 000 дней." ;

              }

              else {
                var date1001 = new Date(date1000.getTime());
                date1001.setDate(date1001.getDate() + 1);

                document.getElementById('answer').innerHTML = "Вам сегодня " + days + " " + daysplural + ".<br>"
                + date1000.toLocaleDateString() +  "г. вам исполнится " +(count1000 +1)+ " 000 дней. ";

                var title = "Вам исполняется " +(count1000 +1)+ " 000 дней!" ;
                var dates = date1000.toISOString().slice(0,10).replace(/-/g,"") + "/" + date1001.toISOString().slice(0,10).replace(/-/g,"");
                var details = "Добавлено на {{site.url}}{{site.baseurl}}, "+ date2.toLocaleDateString() +  "г.";

                var address = "https://calendar.google.com/calendar/render?action=TEMPLATE" +
                  "&text=" + title +
                  "&dates=" + dates +
                  "&details=" + details;


                document.timerform.addtocalendarfieldset.hidden = false;
                document.timerform.addtocalendar.onclick = function(){ window.open(address); }
              }


          }



        }
    }
</script>
